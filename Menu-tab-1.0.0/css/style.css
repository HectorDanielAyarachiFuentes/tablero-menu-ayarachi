
:root{
/* Default Theme (Paisaje) - these will be overridden by JS */
--panel-text-color: #dbe7ff;
--panel-text-secondary-color: #dbe7ff;
--panel-bg: #0e193a;
--accent-color: #8e44ad;
--button-bg: rgba(255, 255, 255, 0.05);
--button-hover-bg: rgba(255, 255, 255, 0.1);
--panel-radius: 12px;

--panel-opacity: 0.05;
--panel-blur: 6px;

font-family: 'Poppins', sans-serif;
}
*{box-sizing:border-box}html{background:#000;}

body{color:var(--panel-text-color);
  height:100%;margin:0;background-image:var(--bg-image);color:var(--text-color); transition: background-image .4s ease-in-out, color .4s ease-in-out;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}
body.no-scroll { overflow: hidden; }
.wrap{min-height:100vh;display:flex;flex-direction:column; background-color: rgba(0,0,0,0.4); /* Fondo semi-transparente por defecto */}
.header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px}
.brand{font-weight:600;font-size:18px}
.brand-container{display:flex;align-items:center;gap:10px}
.clock-header { font-size: 18px; font-weight: 600; opacity: 0.9; padding-left: 10px; border-left: 1px solid rgba(255,255,255,0.2); }
.controls{display:flex;gap:8px}
.controls button{background:var(--button-bg);border:1px solid rgba(255,255,255,0.1);color:var(--panel-text-color);font-size:18px;padding:8px;border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition: all .2s ease;}
.back-btn{font-size:24px;font-weight:bold;padding:0 10px}
.controls button:hover { background: var(--button-hover-bg); transform: scale(1.1); }
.brand strong{font-weight:700; color: var(--text-color-strong);}
.controls button img, .controls button svg{width:24px; height:24px; transition:transform .4s cubic-bezier(.25,.8,.25,1)}
.permission-banner {
  background-color: #e67e22;
  color: #fff;
  padding: 12px 24px;
  text-align: center;
  font-size: 14px;
  display: none; /* Oculto por defecto */
}
.permission-banner.visible {
  display: block;
  animation: fadeInDown 0.5s ease-out;
}
.permission-banner-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}
.btn.btn-small {
  padding: 6px 12px;
  font-size: 13px;
  background-color: rgba(0,0,0,0.2);
}
.controls button.active img, .controls button.active svg{transform:rotate(90deg)}

body.loading .live-info,
body.loading .search-section,
body.loading .tiles-section {
  opacity: 0;
  transform: translateY(20px);
}

.live-info {
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.placeholder {
  display: inline-block;
  background-color: rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  /* Shimmer effect */
  background-image: linear-gradient(90deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.08) 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}
/* Tamaños específicos para los placeholders que estaban en línea */
/* Ocultamos los placeholders que ahora se rellenan instantáneamente con pre-loader.js */
#greeting .placeholder,
#clock .placeholder,
#date .placeholder { display: none; }

#weather .placeholder { width: 120px; height: 48px; }

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.main{
  flex:1;display:flex;flex-direction:column;align-items:center;gap:18px;padding:12px;
  transition:filter .4s ease, background-color .3s;
  will-change: filter;
} .main.blurred { filter: blur(4px); }
.top-content {
    width: min(980px,96%);
    text-align: center;
    padding-top: 2vh; /* Add some space at the top */
    padding-bottom: 1vh;
}
.date{
    font-size: 1.2em;
    font-weight: 400;
    opacity:0.9;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}
.forecast-day{font-weight:600}
.forecast-temp-range{font-size:0.9em}
.search-card{display:flex;align-items:stretch;width:min(980px,96%);background:rgba(var(--panel-bg-rgb), var(--panel-opacity));border-radius:var(--panel-radius);backdrop-filter:blur(var(--panel-blur)); -webkit-backdrop-filter: blur(var(--panel-blur)); border: 1px solid rgba(255, 255, 255, 0.1);}
.search-section { transition: opacity 0.5s ease-out, transform 0.5s ease-out; transition-delay: 0.2s; }
.tiles-section { width: 100%; transition: opacity 0.5s ease-out, transform 0.5s ease-out; transition-delay: 0.3s; }
.search-card{border:1px solid transparent;transition:border-color .3s ease, background-color .3s ease;}
.search-card:focus-within{border-color:var(--accent-color)}
.search-card input{padding:12px;border-radius:0;border:0;background:transparent;color:var(--panel-text-color)}
.search-card input::placeholder { color: var(--panel-text-secondary-color); opacity: 0.6; }
.search-card select option{color:black;background:white} /* This rule seems unused now, but I'll leave it. */
.search-card input{flex:1;font-size:16px}
.search-card button{display:flex;align-items:center;gap:8px;background:#16a085;border:0;padding:12px 16px;border-radius:0 var(--panel-radius) var(--panel-radius) 0;color:white;cursor:pointer; transition: background-color .2s;}
.search-card button:hover { background-color: #1abc9c; }
.search-card button svg{width:16px;height:16px}
.tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;width:100%;max-width:1100px;margin:6px auto 0;perspective:800px;}
.tile{
  position:relative;display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;background:rgba(var(--panel-bg-rgb), var(--panel-opacity)); backdrop-filter: blur(var(--panel-blur)); -webkit-backdrop-filter: blur(var(--panel-blur)); cursor:grab;transition:transform .18s, box-shadow .18s, background-color .3s ease;text-decoration:none;color:var(--panel-text-color);opacity:0;animation:fadeInUp .4s ease-out forwards;
  will-change: transform, box-shadow;
  /* Usamos una variable para el delay de la animación para cumplir con la CSP */
  animation-delay: var(--animation-delay, 0s); border-radius: var(--panel-radius);
} a.tile { text-decoration: none; color: var(--panel-text-color); }
.tile:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 18px 40px rgba(0,0,0,0.5)}
.thumb{width:48px;height:48px;border-radius:10px;background:rgba(255,255,255,0.03);object-fit:contain;padding:4px}
.info{flex:1;overflow:hidden}
.tile.dragging { opacity: 0.4; }
.tile.drag-over { transform: scale(1.05); border: 2px solid var(--accent-color); }

.title{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.url{font-size:12px;opacity:0.8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis; color: var(--panel-text-secondary-color);}
.actions{
  position:absolute;top:8px;right:8px;display:flex;gap:4px;opacity:0;transition:opacity .2s;
  will-change: opacity;
}
.tile:hover .actions{opacity:1}
.actions .more-btn{background:rgba(0,0,0,0.3);border:0;color:white;border-radius:6px;cursor:pointer;padding:4px; display: flex; align-items: center;}
.actions .more-btn:hover{background:rgba(0,0,0,0.5)}
.tile-skeleton {
  background-color: rgba(var(--panel-bg-rgb), var(--panel-opacity));
  backdrop-filter: blur(var(--panel-blur));
  border-radius: var(--panel-radius);
  animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  animation-delay: var(--animation-delay, 0s);
}
.search-card {
  background-color: rgba(var(--panel-bg-rgb), var(--panel-opacity));
  backdrop-filter: blur(var(--panel-blur));
}
.tile.pending-delete { animation: shake 0.6s cubic-bezier(.36,.07,.19,.97) both; border: 1px solid #c0392b; }
.tile-add{flex-direction:column;justify-content:center;align-items:center;gap:8px;border:2px dashed rgba(255,255,255,0.2);background:transparent;cursor:pointer}
.tile.folder .thumb{content:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z'%3E%3C/path%3E%3C/svg%3E");padding:16px}
.tile.drag-over-folder{box-shadow:0 0 0 2px var(--accent-color)}
.tile-add:hover{background:rgba(255,255,255,0.05);border-style:solid}
.tile-add span{font-size:32px;font-weight:300;line-height:1}
.tile-add .actions{display:none}

.footer{padding:12px;text-align:center;opacity:0.8}

.overlay{position:fixed;inset:0;background:rgba(6,8,23,0.6);z-index:1999;opacity:0;visibility:hidden;transition:opacity .4s, visibility .4s}
.overlay[aria-hidden="false"]{opacity:1;visibility:visible}

.settings{
  position:fixed;right:20px;top:20px;width:440px;background:var(--panel-bg);border: 1px solid rgba(255,255,255,0.1);padding:20px;border-radius:16px;box-shadow:0 18px 40px rgba(0,0,0,0.6);z-index:2000;transform:translateX(calc(100% + 40px));visibility:hidden;
  transition:transform .4s cubic-bezier(.25,.8,.25,1), visibility .4s, width .3s, border-radius .3s;
  will-change: transform;  
  background: rgba(var(--panel-bg-rgb), var(--panel-opacity));
  backdrop-filter: blur(var(--panel-blur));
}
.notes-panel {
  position: fixed;
  left: 0;
  top: 0;
  height: 100%;
  width: 320px;  
  background: rgba(var(--panel-bg-rgb), var(--panel-opacity));
  backdrop-filter: blur(var(--panel-blur));
  border-right: 1px solid rgba(255, 255, 255, 0.1);  
  box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
  z-index: 2001; /* Above settings panel */
  transform: translateX(-100%);
  visibility: hidden;
  transition: transform .4s cubic-bezier(.25, .8, .25, 1), visibility .4s;
  will-change: transform;
  display: flex;
  flex-direction: column;
}
.notes-panel[aria-hidden="false"] {
  transform: translateX(0);
  visibility: visible;
}
.notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center; 
  padding: 16px 20px;
  flex-shrink: 0;
}
.notes-title-group { display: flex; align-items: center; gap: 12px; }
.notes-title-group svg { opacity: 0.7; }
.notes-header h3 { margin: 0; font-size: 18px; font-weight: 600; }
.notes-header button {
  background: rgba(255, 255, 255, 0.08); border: 0; color: var(--text-color); opacity: 0.8; transition: opacity .2s, transform .2s, background-color .2s; display: flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 50%; cursor: pointer;
}
.notes-header button:hover { opacity: 1; transform: scale(1.05); background-color: rgba(255, 255, 255, 0.15); }
.notes-header button svg { width: 20px; height: 20px; }
.add-note-btn {
    background: var(--accent-color) !important;
    font-size: 28px;
    font-weight: 300;
    width: 32px !important;
    height: 32px !important;
    border-radius: 8px !important;
}
.notes-body {
  flex: 1;
  overflow-y: auto;
  padding: 0 20px 20px 20px;
  scrollbar-width: thin;
  scrollbar-color: var(--accent-color) transparent;
}
.notes-list { display: flex; flex-direction: column; gap: 12px; }

.settings[aria-hidden="false"]{transform:translateX(0);visibility:visible}

.settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.settings-header {
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 0;
}
.save-status {
  font-size: 13px; color: #2ecc71; opacity: 0; transition: opacity .3s;
  height: 14px; /* Reserve space to prevent layout shift */
}
.save-status.error {
  color: #e74c3c; /* Rojo para errores */
}
.save-status.visible {
  opacity: 1;
}

.settings-tabs{
  display: flex;
  margin-bottom: 20px;
  overflow-x: auto;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  /* IE and Edge */
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.settings-tabs::-webkit-scrollbar { display: none; } /* Chrome, Safari, Opera */
.tab-btn{
  position: relative;
  background: transparent;
  border: 0;  color: var(--panel-text-color);
  padding: 12px 8px;
  cursor: pointer;
  opacity: 0.6;
  transition: opacity .2s ease;
  display: flex;  
  align-items: center;
  gap: 8px;
  font-size: 13px;
  white-space: nowrap;
}
.tab-btn svg { width: 18px; height: 18px; }
.tab-btn:not(.active):hover { opacity: 1; }
.tab-btn.active{opacity:1;font-weight:600}
.tab-btn::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background-color: var(--accent-color);
  transform: scaleX(0);
  transition: transform .3s cubic-bezier(.25,.8,.25,1);
}
.tab-btn.active::after {
  transform: scaleX(1);
}
.settings-header h3{margin:0;font-size:18px;font-weight:600}
.settings-header button{
  background:rgba(255,255,255,0.08);border:0;color:var(--panel-text-color);opacity:0.8;transition:opacity .2s, transform .2s, background-color .2s; display: flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 50%;
}
.settings-header button:hover{opacity:1;transform:scale(1.05); background-color: rgba(255,255,255,0.15);}
.settings-body{
  position: relative;
  max-height:calc(100vh - 230px);
  overflow-y:auto;
  scrollbar-width:thin;
  scrollbar-color:var(--accent-color) transparent; 
  padding-right: 8px; 
  margin-right: -8px;
}
.tab-pane{
  display: none; padding-top: 4px; opacity: 0;
  animation: fadeIn 0.4s ease-out forwards;
}
.tab-pane.active{display:block;}
.tab-pane > .field{display:flex;flex-direction:column;gap:12px}
.field{padding: 16px 0;border-bottom:1px solid rgba(255,255,255,0.08)}
.field:last-child{border-bottom:none}
.settings-header button img, .settings-header button svg {
    width: 24px;
    height: 24px;
}
.field > label{display:block;font-weight:600;font-size:15px;margin:0}
.theme-list{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;}
.editor{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
.editor-search-container {
  margin-bottom: 12px;
}
.editor-search-container input { width: 100%; }
.editor .row{display:flex;gap:8px;align-items:center;padding:4px;border-radius:6px;border:1px solid transparent;cursor:grab}
.editor .row.dragging{opacity:0.5}
.editor .row.drag-over{border-color:var(--accent-color)}
.settings input, .settings select, .modal-card input, .modal-card select, .modal-card textarea{width:100%;padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:var(--panel-text-color);font-family:inherit;font-size:14px; resize: vertical;}
.settings input:focus, .settings select:focus, .modal-card input:focus, .modal-card select:focus, .modal-card textarea:focus { outline: none; border-color: var(--accent-color); }
.settings input::placeholder, .modal-card input::placeholder, .modal-card textarea::placeholder{color:rgba(255,255,255,0.4)}
.btn{padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.1);color:var(--panel-text-color);cursor:pointer;font-family:inherit;font-size:14px;transition:background-color .2s, border-color .2s; display: inline-flex; align-items: center; justify-content: center; gap: 8px;}
.btn:hover{background-color:rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.3);}
.btn.primary{background:var(--accent-color);border-color:var(--accent-color);color:white}
.btn.primary:hover{background:hsl(288, 41%, 48%)}
.btn.full-width{width:100%}
.btn.btn-danger {
  background-color: #922b21;
  border-color: transparent;
  color: #fbeee6;
  padding: 6px 10px;
  font-size: 12px;
}
.btn.btn-danger:hover {
  background-color: #c0392b;
}
.theme-btn{position:relative;height:60px;border-radius:8px;border:2px solid transparent;cursor:pointer;transition:all .2s;overflow:hidden;background-size:cover;background-position:center;color:white;text-shadow:1px 1px 2px rgba(0,0,0,0.8);font-size:12px;font-weight:600;display:flex;align-items:flex-end;padding:6px;background-color:rgba(255,255,255,0.1); background-image: var(--theme-bg-preview);}
.theme-btn:hover{transform:scale(1.05);border-color:rgba(255,255,255,0.5)}
.theme-btn.active{border-color:var(--accent-color);transform:scale(1.05)}
.theme-name{
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(2px);
  padding: 2px 6px;
  border-radius: 4px;
  width: 100%;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.sub-tabs {
  display: flex;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 8px;
}
.sub-tab-btn {
  background: transparent;
  border: none;
  color: var(--panel-text-color);
  opacity: 0.6;
  padding: 8px 12px;
  font-size: 14px;
  cursor: pointer;
  position: relative;
  transition: opacity .2s;
}
.sub-tab-btn:hover { opacity: 1; }
.sub-tab-btn.active { opacity: 1; font-weight: 600; }
.sub-tab-btn.active::after {
  content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 2px; background: var(--accent-color);
}
.sub-tab-pane { display: none; }
.sub-tab-pane.active { display: block; animation: fadeIn 0.3s ease-out; }

.panel-theme-btn {
  -webkit-backdrop-filter: var(--webkit-backdrop-filter, none);
  backdrop-filter: var(--backdrop-filter, none);
}
.gradient-list{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));gap:8px;max-height:210px;overflow-y:auto;padding:4px;scrollbar-width:thin;scrollbar-color:var(--accent-color) transparent}
.panel-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0 16px; /* Sin gap vertical, 16px horizontal */
}
.panel-grid .field { padding-top: 8px; padding-bottom: 8px; }
.panel-grid .field.field-full-width { grid-column: 1 / -1; }
.panel-grid .field label { margin-bottom: 8px; }
.gradient-btn{height:50px;border-radius:8px;border:2px solid transparent;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;color:white;text-shadow:1px 1px 2px rgba(0,0,0,0.6);font-size:11px;display:flex;align-items:center;justify-content:center;text-align:center;padding:4px;font-weight:600; background-image: var(--gradient-bg-preview);}
.gradient-btn.active{border-color:var(--accent-color);transform:scale(1.05)}
.gradient-btn:hover{transform:scale(1.05);border-color:rgba(255,255,255,0.5)}
.input-group input{flex:1}
.or{text-align:center;font-size:12px;margin:12px 0;color:rgba(255,255,255,0.4)}
.file-label{display:block;text-align:center}
.field label span {
    font-weight: 300;
    opacity: 0.7;
}
.field-description {
    font-size: 13px;
    opacity: 0.7;
    line-height: 1.5;
}
.field.field-toggle {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
}
.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
}
.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}
.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255,255,255,0.1);
    transition: .4s;
}
.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
}
input:checked + .slider {
    background-color: var(--accent-color);
}
input:checked + .slider:before {
    transform: translateX(22px);
}
.slider.round {
    border-radius: 34px;
}
.slider.round:before {
    border-radius: 50%;
}
.field label span {
    font-weight: 300;
    opacity: 0.7;
}
.button-group{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.editor .row input{flex:1}
.editor .row .e-save{padding:6px 10px;font-size:12px;cursor:pointer}
.dir-path {
    font-size: 12px;
    background: rgba(0,0,0,0.2);
    padding: 8px 12px;
    border-radius: 6px;
    word-break: break-all;
    opacity: 0.8;
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
}
.dir-path.warning {
    color: #f39c12;
}
.data-section {
    padding: 12px 0;
    border-bottom: 1px solid rgba(255,255,255,0.08);
}
.data-section:last-child { border-bottom: none; }
.data-section h4 {
    margin: 0 0 16px 0; font-size: 16px; font-weight: 600;
}
.data-status-container {
    padding: 10px 14px;
    border-radius: 8px;
    margin-bottom: 16px;
    font-size: 14px;
    display: none; /* Oculto por defecto */
    align-items: center;
    gap: 10px;
    animation: fadeIn 0.3s ease-out;
}
.data-status-container.visible {
    display: flex;
}
.data-status-container.error {
    background-color: rgba(231, 76, 60, 0.15);
    color: #f5b7b1;
    border: 1px solid rgba(231, 76, 60, 0.3);
.data-status-container .btn-link { color: #f5b7b1 !important; }
}
/* Estilos para los selectores de color en la configuración de paneles */
.settings input[type="color"] {
    -webkit-appearance: none;
    padding: 0;
    border: none;
    width: 100%; /* Ocupa todo el ancho disponible */
    height: 40px;
    border-radius: 8px;
    cursor: pointer;
}

.input-group-color {
    display: flex;
    align-items: center;
    gap: 8px;
} .input-group-color.compact input[type="color"] { width: 100%; }
.input-group-color input[type="color"] {
    -webkit-appearance: none;
    padding: 0;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 8px;
    cursor: pointer;
}
/* Estilos para la pestaña de la papelera */
#tab-papelera .trash-list { display: flex; flex-direction: column; gap: 8px; }
#tab-papelera .field-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}
.tab-pane.active .trash-item { display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.03); padding: 8px; border-radius: 8px; }
.tab-pane.active .trash-item-info { flex: 1; display: flex; align-items: center; gap: 10px; overflow: hidden; }
.tab-pane.active .trash-item-info img { width: 24px; height: 24px; border-radius: 4px; }
.tab-pane.active .trash-item-info span { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 14px; }
.tab-pane.active .trash-actions button { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: var(--panel-text-color); border-radius: 6px; padding: 6px; cursor: pointer; display: flex; align-items: center; transition: background-color .2s; }
.tab-pane.active .trash-actions button:hover { background-color: rgba(255,255,255,0.1); }
.tab-pane.active .trash-actions button.delete-perm:hover { background-color: #c0392b; border-color: #c0392b; }
.tab-pane.active .trash-actions { display: flex; gap: 6px; }
.tab-pane.active .trash-actions svg { width: 16px; height: 16px; }
#tab-papelera .trash-list:empty::after {
  content: 'La papelera está vacía.';
  display: block; text-align: center; padding: 20px; opacity: 0.5;
}

/* Estilos para la pestaña Doodle */
.doodle-preview {
  position: relative;
  height: 180px;
  background-color: rgba(0,0,0,0.2);
  border-radius: 8px;
  overflow: hidden; /* Muy importante para contener el doodle */
}

/* Contenedor principal del doodle para evitar scroll */
#doodle-background {
  position: fixed;
  inset: 0;
  z-index: -1;
  overflow: hidden;
}

.doodle-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
}
.doodle-item {
  background: transparent;
  border: none;
  padding: 0;
  border-radius: 8px;
  cursor: pointer;
  transition: transform .2s, box-shadow .2s;
  border: 2px solid transparent;
}
.doodle-item:hover { transform: scale(1.05); }
.doodle-item.active { border-color: var(--accent-color); }
.doodle-item-preview {
  height: 80px;
  background-color: rgba(0,0,0,0.2);
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}

@keyframes shake {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-3px, 0, 0); }
  40%, 60% { transform: translate3d(3px, 0, 0); }
}

@keyframes fadeInUp{
  from{opacity:0;transform:translateY(20px) scale(.98)}
  to{opacity:1;transform:translateY(0) scale(1)}
}

@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* themes */
body.theme-background {
  background-size: cover;
  background-position: center;
}

@media (max-width: 640px) {
  .tiles{grid-template-columns:repeat(2,1fr)}
  .settings {
    left:0; right:0; top:auto; bottom:0;
    width:auto;
    border-radius:16px 16px 0 0;
    transform:translateY(100%);
    padding:16px;
    padding-bottom: 0;
    box-shadow:0 -10px 30px rgba(0,0,0,0.4);
  }
  .settings[aria-hidden="false"]{transform:translateY(0)}
}
@media (min-width: 641px) {
  .settings { width: 580px; }
}


.settings-footer {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid rgba(255,255,255,0.1);
}
.about-link {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;  color: var(--panel-text-color);
  opacity: 0.7;
  transition: opacity .2s;
}
.about-link:hover { opacity: 1; }
.about-photo {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}
.github-icon {
  width: 20px;
  height: 20px;
}
.search-section {
  position: relative;
  z-index: 10;
}
/* Estilos para el nuevo selector de buscador */
.search-card { position: relative; }
.custom-select-wrapper { display: flex; align-items: center; justify-content: center; position: relative; z-index: 2; border-right: 1px solid rgba(255,255,255,0.15); }
.custom-select-trigger { cursor: pointer; display: flex; align-items: center; gap: 8px; padding: 12px 16px; border-radius: 10px 0 0 10px; transition: background-color .2s; height: 100%; }
.custom-select-trigger:hover { background-color: rgba(255,255,255,0.2); }
.custom-select-trigger img { width: 20px; height: 20px; }
.custom-select-trigger .arrow { width: 16px; height: 16px; stroke: currentColor; transition: transform .2s; }
.custom-select-wrapper.open .arrow { transform: rotate(180deg); }
.custom-select-options {
  position: absolute;
  top: calc(100% + 5px);
  left: 0;
  background-color: var(--panel-bg);
  border-radius: 8px;
  padding: 8px;
  z-index: 100;
  width: 200px;
  max-height: 300px;
  overflow-y: auto;
}
/* Estilos para el menú contextual */
.context-menu {
  position: fixed; /* Usar fixed para posicionar relativo a la ventana */
  z-index: 1000;
  opacity: 0;
  transform: translateY(-10px);
  left: var(--menu-left, 0);
  top: var(--menu-top, 0);
  transition: opacity .2s, transform .2s;
  background: rgba(var(--panel-bg-rgb), 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1); border-radius: var(--panel-radius);
  border-radius: 10px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
  padding: 6px;
  min-width: 220px;
  transform: translateY(-10px) scale(0.95);
}
.custom-select-options .option { display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 6px; cursor: pointer; }
.custom-select-options .option:hover { background-color: rgba(255,255,255,0.1); }
/* Fix para el apilamiento (z-index) en la barra de búsqueda */
.search-input-group {
  flex: 1;
  display: flex;
  position: relative; /* Crea un contexto de apilamiento inferior */
  z-index: 1;
}

/* Accesibilidad para el menú contextual */
.context-menu.is-open {
  opacity: 1;
  transform: translateY(0) scale(1);
}
.context-menu ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
.context-menu li button {
  background: none;
  border: none;
  color: inherit;
  font: inherit;
  text-align: left;
  width: 100%;
  padding: 10px 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 12px;
  border-radius: 6px;
  transition: background-color 0.2s, color 0.2s;
}
.context-menu li button:hover {
  background-color: var(--accent-color);
  color: var(--text-color-strong);
}
.context-menu li button.confirm-delete {
  background-color: #c0392b; /* Rojo de advertencia */
  color: #fff;
}
.context-menu li button.confirm-delete:hover {
  background-color: #e74c3c; /* Rojo más brillante al pasar el ratón */
  color: #fff;
}
.context-menu li button svg {
  opacity: 0.8;
  transition: opacity 0.2s;
}
.context-menu li button:hover svg {
  opacity: 1;
}
.context-menu li.separator {
  height: 1px;
  background-color: rgba(255, 255, 255, 0.1);
  margin: 6px 0;
}

/* Styles for notes inside the new panel */
.note-item {
  position: relative;
  background: linear-gradient(135deg, #fef9e7, #f9e79f);
  color: #333;
  padding: 16px;
  border-radius: 8px;
  border: 1px solid rgba(0,0,0,0.05);
  box-shadow: 0 2px 4px rgba(0,0,0,0.05), 0 5px 15px rgba(0,0,0,0.08);
  cursor: pointer;
  transition: transform 0.25s cubic-bezier(.25,.8,.25,1), box-shadow 0.25s cubic-bezier(.25,.8,.25,1);
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp .4s ease-out forwards;
  animation-delay: var(--animation-delay, 0s);
}
.note-item:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.07), 0 10px 25px rgba(0,0,0,0.12);
}
.note-item-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  font-weight: bold;
  font-size: 15px;
  margin-bottom: 8px;
  padding-right: 60px; /* Space for buttons */
}
.note-item-content {
  font-size: 14px;
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
  display: -webkit-box; -webkit-line-clamp: 5; -webkit-box-orient: vertical; overflow: hidden;
}
.note-item-actions {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  gap: 6px;
  opacity: 0;
  transition: opacity 0.2s;
}
.note-item:hover .note-item-actions {
  opacity: 1;
}
.note-item-actions button {
  background: rgba(0,0,0,0.08);
  border: none;
  border-radius: 6px;
  padding: 5px;
  cursor: pointer;
  display: flex;
  color: #333;
}
.note-item-actions button:hover {
  background: rgba(0,0,0,0.15);
}
.note-item-actions svg {
  width: 16px;
  height: 16px;
}
.notes-list .empty-notes {
  text-align: center;
  padding: 40px 20px;
  opacity: 0.6;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}
.notes-list .empty-notes svg {
  width: 48px;
  height: 48px;
  opacity: 0.5;
}

.rich-editor-container {
  position: relative;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.05);
  transition: border-color .2s;
}
.rich-editor-container:focus-within {
  border-color: var(--accent-color);
}
.rich-editor-toolbar {
  display: flex;
  gap: 4px;
  padding: 6px 8px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}
.rich-editor-toolbar button {
  background: transparent; border: 1px solid transparent; color: var(--panel-text-color); opacity: 0.7;
  width: 28px; height: 28px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center;
}
.rich-editor-toolbar button:hover { background: rgba(255,255,255,0.1); opacity: 1; }
.rich-text-editor {
  min-height: 120px; 
  max-height: 30vh; /* Altura máxima para el editor antes de que aparezca el scroll */
  padding: 8px 12px;
  color: var(--panel-text-color); 
  font-family: inherit; 
  font-size: 14px;
  resize: vertical;
  overflow-y: auto; /* Scroll interno para el editor */
  scrollbar-width: thin; scrollbar-color: var(--accent-color) transparent;
}
.rich-text-editor:focus { outline: none; }

/* Fixed Weather Widget Styles */
.modal {
  position: fixed;
  inset: 0;
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(6, 8, 23, 0.4);
  backdrop-filter: blur(4px);
  opacity: 0;
  visibility: hidden;
  transition: opacity .3s, visibility .3s;
}
.modal[aria-hidden="false"] {
  opacity: 1;
  visibility: visible;
}
.modal-card {
  width: min(480px, 95vw);
  background: var(--panel-bg);
  border: 1px solid rgba(255, 255, 255, 0.1); border-radius: var(--panel-radius);
  border-radius: 16px;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
  display: flex;
  flex-direction: column;
  transform: scale(0.95);
  transition: transform .3s cubic-bezier(.25,.8,.25,1);
}.modal[aria-hidden="false"] .modal-card {
  transform: scale(1);
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.modal-header h4 { margin: 0; font-size: 18px; font-weight: 600; }
.modal-close {
  background: rgba(255, 255, 255, 0.08);
  border: 0;  color: var(--panel-text-color);
  opacity: 0.8;
  transition: opacity .2s, transform .2s, background-color .2s;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 18px;
}
.modal-close:hover { opacity: 1; transform: scale(1.05); background-color: rgba(255, 255, 255, 0.15); }
.modal-body { padding: 24px; display: flex; flex-direction: column; gap: 20px; }
.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}
.modal-footer .btn {
  min-width: 110px;
  padding: 10px 16px;
}
.modal-icon-container {
  position: relative;
  width: 100px;
  height: 100px;
  margin: 0 auto; /* Centrar el contenedor */
}
.modal-icon-preview {
  width: 100%;
  height: 100%;
  border: 2px dashed rgba(255,255,255,0.2);
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255,255,255,0.05);
  transition: background-color .2s, border-color .2s;
  overflow: hidden;
}
.modal-icon-preview:hover {
  background-color: rgba(255,255,255,0.1);
  border-color: var(--accent-color);
}
.modal-icon-preview img { width: 100%; height: 100%; object-fit: contain; }
.modal-icon-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  color: rgba(255,255,255,0.5);
  transition: color .2s;
}
.modal-icon-preview:hover .modal-icon-placeholder { color: var(--accent-color); }
.modal-icon-placeholder svg { width: 28px; height: 28px; }
.modal-icon-placeholder span { font-size: 12px; }
.modal-icon-reset {
  position: absolute;
  top: -8px;
  right: -8px;
  background: #333;
  border: 2px solid var(--panel-bg);
  color: white;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform .2s, background-color .2s;
}
.modal-icon-reset:hover { transform: scale(1.1); background-color: #e74c3c; }
.modal-icon-reset svg { width: 16px; height: 16px; }
.weather-widget-fixed {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 10;
    cursor: pointer;
    background: rgba(var(--panel-bg-rgb), var(--panel-opacity));
    backdrop-filter: blur(var(--panel-blur));
    -webkit-backdrop-filter: blur(var(--panel-blur));
    padding: 8px 12px; border-radius: var(--panel-radius);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all .3s ease;
}
.weather-widget-fixed:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
}
.weather-summary{display:flex;align-items:center;gap:8px;}
.weather-temp{font-size:1.5em;font-weight:600}
.weather-icon{width:40px;height:40px}
.weather-details{display:flex;flex-direction:column; line-height: 1.2;}
.weather-extra{font-size:0.8em;opacity:0.7}
.weather-expanded{display: none;} /* Ocultamos la expansión por ahora para este diseño */

/* Floating Label Styles for Modal */
.form-group {
  position: relative;
}
.form-group label {
  position: absolute;
  left: 12px;
  top: 12px;
  font-size: 14px;
  color: rgba(255,255,255,0.5);
  pointer-events: none;
  transition: all 0.2s ease;
}
.form-group.with-icon {
  position: relative;
}
.form-group.with-icon svg {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
  color: rgba(255,255,255,0.4);
  transition: color 0.2s;
}
.form-group.with-icon input {
  padding-left: 40px;
}
.form-group.with-icon label {
  left: 40px;
}
.form-group.with-icon input:focus ~ svg {
  color: var(--accent-color);
}
.form-group input:focus + label, .form-group input:not(:placeholder-shown) + label {
  top: -9px;
  left: 10px;
  font-size: 11px;
  color: var(--accent-color);
  background: var(--panel-bg);
  padding: 0 4px;
}
/* Floating label for contenteditable div */
.form-group .rich-editor-container:focus-within + label,
.form-group .rich-text-editor:not(:empty) ~ label {
  top: -9px; left: 10px; font-size: 11px; color: var(--accent-color); background: var(--panel-bg); padding: 0 4px;
}
/* Ajuste para la posición inicial de la etiqueta del editor de texto enriquecido */
.form-group .rich-editor-container + label {
  top: 50px; /* Posiciona la etiqueta debajo de la barra de herramientas */
}

/* Custom Range Slider Styles */
input[type=range] {
  -webkit-appearance: none;
  width: 100%;
  background: transparent;
  margin: 8px 0;
}

input[type=range]:focus {
  outline: none;
}

input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: 6px;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: var(--panel-text-color);
  cursor: pointer;
  margin-top: -7px; /* (track-height - thumb-height) / 2 */
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  transition: transform .2s ease;
}

input[type=range]:focus::-webkit-slider-thumb,
input[type=range]:hover::-webkit-slider-thumb {
  transform: scale(1.1);
}

input[type=range]::-moz-range-track { width: 100%; height: 6px; cursor: pointer; background: rgba(255, 255, 255, 0.1); border-radius: 3px; }
input[type=range]::-moz-range-thumb { height: 20px; width: 20px; border-radius: 50%; background: var(--panel-text-color); cursor: pointer; border: none; box-shadow: 0 1px 3px rgba(0,0,0,0.3); }
