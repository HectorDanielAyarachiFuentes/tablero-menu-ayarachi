
:root{--muted:#dbe7ff;--accent:#7b3b8b;font-family:'Poppins',sans-serif;
--panel-opacity: 0.05;
--panel-blur: 6px;
--panel-bg: #0e193a;
}
*{box-sizing:border-box}html{background:#07102a;}body{height:100%;margin:0;background:transparent;color:var(--muted); transition: background-image .4s ease-in-out;}
.wrap{min-height:100vh;display:flex;flex-direction:column}
.header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px}
.brand{font-weight:600;font-size:18px}
.brand-container{display:flex;align-items:center;gap:10px}
.controls button{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);color:var(--muted);font-size:18px;padding:8px;border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition: all .2s ease;}
.back-btn{font-size:24px;font-weight:bold;padding:0 10px}
.controls button:hover { background: rgba(255,255,255,0.1); transform: scale(1.1); }
.brand strong{font-weight:700}
.controls button img, .controls button svg{width:24px; height:24px; transition:transform .4s cubic-bezier(.25,.8,.25,1)}
.controls button.active img, .controls button.active svg{transform:rotate(90deg)}

body.loading .live-info,
body.loading .search-section,
body.loading .tiles-section {
  opacity: 0;
  transform: translateY(20px);
}

.placeholder {
  display: inline-block;
  background-color: rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes pulse { 50% { opacity: .5; } }

.main{
  flex:1;display:flex;flex-direction:column;align-items:center;gap:18px;padding:12px;
  transition:filter .4s ease, background-color .3s;
  will-change: filter;
}
.search-card{display:flex;align-items:stretch;width:min(980px,96%);background:rgba(255,255,255,0.1);border-radius:12px;backdrop-filter:blur(var(--panel-blur)); -webkit-backdrop-filter: blur(var(--panel-blur)); border: 1px solid rgba(255, 255, 255, 0.1);}
.live-info{display:flex;justify-content:space-between;align-items:flex-start;width:min(980px,96%);gap:20px; transition: opacity 0.5s ease-out, transform 0.5s ease-out; transition-delay: 0.1s;}
.time-info{line-height:1}
.date{font-size:1em;font-weight:400;opacity:0.8;margin-top:4px}
.clock{font-size:3.5em;font-weight:700;letter-spacing:-2px}
.weather-widget{cursor:pointer}
.weather-summary{display:flex;align-items:center;gap:8px;text-align:right}
.weather-temp{font-size:2em;font-weight:600}
.weather-icon{width:50px;height:50px}
.weather-details{display:flex;flex-direction:column}
.weather-extra{font-size:0.8em;opacity:0.7}
.weather-expanded{max-height:0;overflow:hidden;transition:max-height .4s ease-out;background:rgba(0,0,0,0.2);border-radius:12px;margin-top:10px;padding:0 12px}
.weather-widget.open .weather-expanded{max-height:500px;padding:12px}
.forecast-hourly, .forecast-daily{display:flex;gap:12px;padding:10px 0;border-top:1px solid rgba(255,255,255,0.1)}
.forecast-hourly > div, .forecast-daily > div{flex:1;text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px}
.forecast-hourly img, .forecast-daily img{width:32px;height:32px}
.forecast-time{font-weight:600}
.forecast-temp{font-weight:600}
.forecast-day{font-weight:600}
.forecast-temp-range{font-size:0.9em}

.search-section { transition: opacity 0.5s ease-out, transform 0.5s ease-out; transition-delay: 0.2s; }
.tiles-section { width: 100%; transition: opacity 0.5s ease-out, transform 0.5s ease-out; transition-delay: 0.3s; }
.search-card{border:1px solid transparent;transition:border-color .3s ease}
.search-card:focus-within{border-color:var(--accent)}
.search-card input{padding:12px;border-radius:0;border:0;background:transparent;color:#fff}
.search-card input::placeholder { color: rgba(255, 255, 255, 0.6); }
.search-card select option{color:black;background:white} /* This rule seems unused now, but I'll leave it. */
.search-card input{flex:1;font-size:16px}
.search-card button{display:flex;align-items:center;gap:8px;background:#16a085;border:0;padding:12px 16px;border-radius:0 10px 10px 0;color:white;cursor:pointer; transition: background-color .2s;}
.search-card button:hover { background-color: #1abc9c; }
.search-card button svg{width:16px;height:16px}
.tiles{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;width:100%;max-width:1100px;margin:6px auto 0;perspective:800px;}
.tile{
  position:relative;display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;background:rgba(255,255,255, var(--panel-opacity)); backdrop-filter: blur(var(--panel-blur)); -webkit-backdrop-filter: blur(var(--panel-blur)); cursor:grab;transition:transform .18s, box-shadow .18s;text-decoration:none;color:var(--muted);opacity:0;animation:fadeInUp .4s ease-out forwards;
  will-change: transform, box-shadow;
}
.tile:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 18px 40px rgba(0,0,0,0.5)}
.thumb{width:48px;height:48px;border-radius:10px;background:rgba(255,255,255,0.03);object-fit:contain;padding:4px}
.info{flex:1;overflow:hidden}
.tile.dragging { opacity: 0.4; }
.tile.drag-over { transform: scale(1.05); border: 2px solid var(--accent); }

.title{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.url{font-size:12px;opacity:0.8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.actions{
  position:absolute;top:8px;right:8px;display:flex;gap:4px;opacity:0;transition:opacity .2s;
  will-change: opacity;
}
.tile:hover .actions{opacity:1}
.actions .more-btn{background:rgba(0,0,0,0.3);border:0;color:white;border-radius:6px;cursor:pointer;padding:4px; display: flex; align-items: center;}
.actions .more-btn:hover{background:rgba(0,0,0,0.5)}
.tile-skeleton {
  background-color: rgba(255, 255, 255, var(--panel-opacity));
  backdrop-filter: blur(var(--panel-blur));
  border-radius: 12px;
  animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
.tile.pending-delete { animation: shake 0.6s cubic-bezier(.36,.07,.19,.97) both; border: 1px solid #c0392b; }
.tile-add{flex-direction:column;justify-content:center;align-items:center;gap:8px;border:2px dashed rgba(255,255,255,0.2);background:transparent;cursor:pointer}
.tile.folder .thumb{content:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23dbe7ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z'%3E%3C/path%3E%3C/svg%3E");padding:16px}
.tile.drag-over-folder{box-shadow:0 0 0 2px var(--accent)}
.tile-add:hover{background:rgba(255,255,255,0.05);border-style:solid}
.tile-add span{font-size:32px;font-weight:300;line-height:1}
.tile-add .actions{display:none}

.footer{padding:12px;text-align:center;opacity:0.8}

.overlay{position:fixed;inset:0;background:rgba(6,8,23,0.6);z-index:1999;opacity:0;visibility:hidden;transition:opacity .4s, visibility .4s}
.overlay[aria-hidden="false"]{opacity:1;visibility:visible}

.settings{
  position:fixed;right:20px;top:20px;width:380px;background:var(--panel-bg);border: 1px solid rgba(255,255,255,0.1);padding:20px;border-radius:16px;box-shadow:0 18px 40px rgba(0,0,0,0.6);z-index:2000;transform:translateX(calc(100% + 40px));visibility:hidden;
  transition:transform .4s cubic-bezier(.25,.8,.25,1), visibility .4s;
  will-change: transform;
}
.settings[aria-hidden="false"]{transform:translateX(0);visibility:visible}

.settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.save-status {
  font-size: 13px; color: #2ecc71; opacity: 0; transition: opacity .3s;
  height: 14px; /* Reserve space to prevent layout shift */
}
.settings-tabs{display:flex;gap:4px;background:rgba(0,0,0,0.2);border-radius:8px;padding:4px;margin-bottom:20px}
.tab-btn{flex:1;background:transparent;border:0;color:var(--muted);padding:8px;cursor:pointer;border-radius:6px;opacity:0.7;transition: opacity .2s ease, background-color .2s ease;}
.tab-btn:not(.active):hover { opacity: 1; background-color: rgba(255,255,255,0.05); }
.tab-btn.active{background-color:rgba(255,255,255,0.1);opacity:1;font-weight:600}
.settings-header h3{margin:0;font-size:18px;font-weight:600}
.settings-header button{
  background:rgba(255,255,255,0.08);border:0;color:var(--muted);opacity:0.8;transition:opacity .2s, transform .2s, background-color .2s; display: flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 50%;
}
.settings-header button:hover{opacity:1;transform:scale(1.05); background-color: rgba(255,255,255,0.15);}
.settings-body{max-height:calc(100vh - 160px);overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--accent) transparent; padding-right: 8px; margin-right: -8px;}
.tab-pane{display:none; padding-top: 4px;}
.tab-pane.active{display:block}
.tab-pane > .field{display:flex;flex-direction:column;gap:12px}
.field{padding: 20px 0;border-bottom:1px solid rgba(255,255,255,0.08)}
.field:last-child{border-bottom:none}
.settings-header button img, .settings-header button svg {
    width: 24px;
    height: 24px;
}
.field > label{display:block;font-weight:600;font-size:15px;margin:0}
.theme-list{display:flex;gap:8px}
.editor{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
.editor .row{display:flex;gap:8px;align-items:center;padding:4px;border-radius:6px;border:1px solid transparent;cursor:grab}
.editor .row.dragging{opacity:0.5}
.editor .row.drag-over{border-color:var(--accent)}
.settings input, .settings select, .modal-card input, .modal-card select{width:100%;padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:var(--muted);font-family:inherit;font-size:14px}
.settings input::placeholder, .modal-card input::placeholder{color:rgba(255,255,255,0.4)}
.btn{padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.1);color:var(--muted);cursor:pointer;font-family:inherit;font-size:14px;transition:background-color .2s, border-color .2s; display: inline-flex; align-items: center; justify-content: center; gap: 8px;}
.btn:hover{background-color:rgba(255,255,255,0.15)}
.btn.primary{background:var(--accent);border-color:var(--accent);color:white}
.btn.primary:hover{background:hsl(288, 41%, 48%)}
.btn.full-width{width:100%}
.theme.active{border-color:var(--accent);background:rgba(123,59,139,0.3)}
.input-group{display:flex;gap:8px}
.gradient-list{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));gap:8px;max-height:210px;overflow-y:auto;padding:4px;scrollbar-width:thin;scrollbar-color:var(--accent) transparent}
.gradient-btn{height:40px;border-radius:8px;border:2px solid transparent;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;color:white;text-shadow:1px 1px 2px rgba(0,0,0,0.6);font-size:11px;display:flex;align-items:center;justify-content:center;text-align:center;padding:4px;font-weight:600}
.gradient-btn.active{border-color:var(--accent);transform:scale(1.05)}
.gradient-btn:hover{transform:scale(1.05);border-color:rgba(255,255,255,0.5)}
.input-group input{flex:1}
.or{text-align:center;font-size:12px;margin:12px 0;color:rgba(255,255,255,0.4)}
.file-label{display:block;text-align:center}
.field label span {
    font-weight: 300;
    opacity: 0.7;
}
.button-group{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.editor .row input{flex:1}
.editor .row .e-save{padding:6px 10px;font-size:12px;cursor:pointer}

@keyframes shake {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-3px, 0, 0); }
  40%, 60% { transform: translate3d(3px, 0, 0); }
}

@keyframes fadeInUp{
  from{opacity:0;transform:translateY(20px) scale(.98)}
  to{opacity:1;transform:translateY(0) scale(1)}
}

/* themes */
body.theme-background {
  background-size: cover;
  background-position: center;
}

@media (max-width: 640px) {
  .tiles{grid-template-columns:repeat(2,1fr)}
  .settings{
    left:0; right:0; top:auto; bottom:0;
    width:auto;
    border-radius:16px 16px 0 0;
    transform:translateY(100%);
    padding:16px;
    box-shadow:0 -10px 30px rgba(0,0,0,0.4);
  }
  .settings[aria-hidden="false"]{transform:translateY(0)}
}

/* Estilos movidos desde index.html */
.about-section { text-align: center; padding: 20px; }
.about-photo {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--primary-color, #fff);
  margin-bottom: 15px;
}
.social-links { margin-top: 20px; display: flex; justify-content: center; gap: 16px; }
.social-links a { color: var(--muted); text-decoration: none; transition: transform .2s; display: inline-block; }
.social-links a:hover { transform: scale(1.2); color: var(--accent); }
.social-links svg {
  width: 28px;
  height: 28px;
}
.search-section {
  position: relative;
  z-index: 10;
}
/* Estilos para el nuevo selector de buscador */
.search-card { position: relative; }
.custom-select-wrapper { display: flex; align-items: center; justify-content: center; position: relative; z-index: 2; border-right: 1px solid rgba(255,255,255,0.15); }
.custom-select-trigger { cursor: pointer; display: flex; align-items: center; gap: 8px; padding: 12px 16px; border-radius: 10px 0 0 10px; transition: background-color .2s; height: 100%; }
.custom-select-trigger:hover { background-color: rgba(255,255,255,0.2); }
.custom-select-trigger img { width: 20px; height: 20px; }
.custom-select-trigger .arrow { width: 16px; height: 16px; stroke: currentColor; transition: transform .2s; }
.custom-select-wrapper.open .arrow { transform: rotate(180deg); }
.custom-select-options {
  position: absolute;
  top: calc(100% + 5px);
  left: 0;
  background-color: var(--panel-bg);
  border-radius: 8px;
  padding: 8px;
  z-index: 100;
  width: 200px;
  max-height: 300px;
  overflow-y: auto;
}
.custom-select-options .option { display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 6px; cursor: pointer; }
.custom-select-options .option:hover { background-color: rgba(255,255,255,0.1); }
/* Fix para el apilamiento (z-index) en la barra de búsqueda */
.search-input-group {
  flex: 1;
  display: flex;
  position: relative; /* Crea un contexto de apilamiento inferior */
  z-index: 1;
}

/* Accesibilidad para el menú contextual */
.context-menu li button {
  background: none;
  border: none;
  color: inherit;
  font: inherit;
  text-align: left;
  width: 100%;
  padding: 9px 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 12px;
}
.context-menu li:hover button {
  color: white;
}
.context-menu li button svg {
  opacity: 0.8;
}
.context-menu li:hover button svg {
  opacity: 1;
}
